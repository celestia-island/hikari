// Use theme variables with namespace to avoid conflicts
@use '../../../../theme/styles/variables.scss' as vars;
@use '../../../../theme/styles/mixins.scss' as mix;

// ============================================
// Hikari Glow Component - Single Glow Color System
// ============================================

// Base glow wrapper styles
.hi-glow-wrapper,
.hi-glow-wrapper-block {
  position: relative;

  // Create dynamic glow overlay using CSS variables (spotlight effect)
  &::before {
    content: '';
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 2;
    border-radius: inherit;
    opacity: 0;
    transition: opacity 0.3s ease-in-out;

    // Use radial-gradient for acrylic spotlight effect
    background: radial-gradient(
      circle at var(--glow-x, 50%) var(--glow-y, 50%),
      var(--hi-glow-color) 0%,
      transparent calc(var(--glow-spread, 1.5) * 100%)
    );
  }

  // Show glow on hover with intensity-based opacity
  &:hover::before {
    opacity: var(--glow-opacity, 0.15);
  }

  // Ensure children (links, buttons) are always clickable
  > * {
    pointer-events: auto;
    position: relative;
    z-index: 1;
  }
}

// ============================================
// Glow Intensity Levels (Opacity & Spread)
// ============================================

// 30% intensity (subtle, default for cards)
// Low opacity, moderate spread for subtle effect
.hi-glow-thirty {
  &::before {
    --glow-opacity: 0.15;
    --glow-spread: 1.8;
  }
}

// 70% intensity (standard)
.hi-glow-seventy {
  &::before {
    --glow-opacity: 0.25;
    --glow-spread: 1.5;
  }
}

// 100% intensity (intense)
.hi-glow-hundred {
  &::before {
    --glow-opacity: 0.35;
    --glow-spread: 1.3;
  }
}

.hi-glow-wrapper {
  display: inline-flex;
  align-items: center;

  // IMPORTANT: When wrapping square buttons (like IconButton), preserve square aspect ratio
  // Do not add width/height constraints here - let to child element determine size

  // Use standard radius to match Button/Input
  border-radius: vars.$hikari-radius-fui-sm;

  // FIX: Prevent button overflow: hidden from clipping glow overlay
  // The glow overlay extends beyond button boundaries, so we need to allow overflow
  overflow: visible;
}

// Block variant for wrapping block-level elements (like Card)
.hi-glow-wrapper-block {
  display: flex;
  flex-direction: column;
  width: 100%;
  border-radius: vars.$hikari-radius-fui-md;
  overflow: visible;
}

// ============================================
// Button Hover Enhancement
// ============================================

// Remove transform translateY from button hover when wrapped in glow
.hi-glow-wrapper .hi-button:hover {
  transform: none;
}

// Focus glow enhancement (uses glow overlay)
.hi-glow-wrapper .hi-button:focus-visible {
  box-shadow:
    0 0 0 2px currentColor,
    0 0 12px var(--hi-glow-color);
}

// Active glow enhancement
.hi-glow-wrapper .hi-button:active:not(:disabled) {
  box-shadow:
    0 0 4px currentColor,
    inset 0 1px 0 var(--hi-white-10, rgba(255,255,255, 0.1));
  transform: translateY(0) scale(0.98);
}

// Input hover enhancement
.hi-glow-wrapper .hi-input-wrapper:hover {
  // No hover effect - handled by glow overlay
}