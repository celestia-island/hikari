// Use theme variables with namespace to avoid conflicts
@use '../../../../theme/styles/variables.scss' as vars;
@use '../../../../theme/styles/mixins.scss' as mix;

// ============================================
// Hikari Glow Component - Single Glow Color System
// ============================================

// Base glow wrapper styles
.hi-glow-wrapper,
.hi-glow-wrapper-block {
  position: relative;

  // Create dynamic glow overlay using CSS variables (spotlight effect)
  &::before {
    content: '';
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 2;
    border-radius: inherit;
    opacity: 0;
    transition: opacity 0.3s ease-in-out;

    // Use radial-gradient for acrylic spotlight effect
    background: radial-gradient(
      circle at var(--glow-x, 50%) var(--glow-y, 50%),
      var(--hi-glow-color) 0%,
      transparent calc(var(--glow-spread, 1.5) * 100%)
    );
  }

  // Show glow on hover with intensity-based opacity
  &:hover::before {
    opacity: var(--glow-opacity, 0.15);
  }

  // Ensure children (links, buttons) are always clickable
  > * {
    pointer-events: auto;
    position: relative;
    z-index: 1;
  }
}

// ============================================
// Glow Intensity Levels (Opacity & Spread)
// ============================================

// 30% intensity (subtle, for large surfaces: cards, panels, containers)
// Very low opacity + wide spread for an almost imperceptible ambient glow
.hi-glow-dim {
  --glow-opacity: 0.07;
  --glow-spread: 2.4;

  &::before {
    --glow-opacity: 0.07;
    --glow-spread: 2.4;
  }
}

// 70% intensity (medium, default for interactive elements: buttons, inputs)
// Balanced opacity + moderate spread for clear but non-distracting feedback
.hi-glow-soft {
  --glow-opacity: 0.15;
  --glow-spread: 1.6;

  &::before {
    --glow-opacity: 0.15;
    --glow-spread: 1.6;
  }
}

// 100% intensity (intense, for emphasis: active states, focus rings)
.hi-glow-bright {
  --glow-opacity: 0.30;
  --glow-spread: 1.3;

  &::before {
    --glow-opacity: 0.30;
    --glow-spread: 1.3;
  }
}

.hi-glow-wrapper {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0; // 防止在 flex 容器中收缩
  align-self: flex-start; // 防止在 flex 容器中被 stretch 拉伸

  // 继承子元素的圆角，或使用 CSS 变量覆盖
  border-radius: var(--hi-glow-radius, inherit);

  // FIX: Prevent button overflow: hidden from clipping glow overlay
  overflow: visible;
}

// Block variant for wrapping block-level elements (like Card)
.hi-glow-wrapper-block {
  display: flex;
  flex-direction: column;
  width: 100%;
  
  // 继承子元素的圆角，或使用 CSS 变量覆盖
  border-radius: var(--hi-glow-radius, inherit);
  overflow: visible;
}

// ============================================
// Button Hover Enhancement
// ============================================

// Remove transform translateY from button hover when wrapped in glow
.hi-glow-wrapper .hi-button:hover {
  transform: none;
}

// Focus glow enhancement (uses glow overlay)
.hi-glow-wrapper .hi-button:focus-visible {
  box-shadow:
    0 0 0 2px currentColor,
    0 0 12px var(--hi-glow-color);
}

// Active glow enhancement
.hi-glow-wrapper .hi-button:active:not(:disabled) {
  box-shadow:
    0 0 4px currentColor,
    inset 0 1px 0 var(--hi-white-10, rgba(255,255,255, 0.1));
  transform: translateY(0) scale(0.98);
}

// Input hover enhancement
.hi-glow-wrapper .hi-input-wrapper:hover {
  // No hover effect - handled by glow overlay
}
